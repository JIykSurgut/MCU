#include <p18f45k22.inc>
R0  EQU  H'0000'
R1  EQU  H'0001'  
R11 EQU  H'000B'
R12 EQU  H'000C'
R13 EQU  H'000D'
FARG_ADC_Read_channel EQU H'0017'    
_adc_rd EQU H'0015'
 
org     0x0000
Start:
    goto Main
    nop
    nop
    goto Start
    nop
    nop
    nop
    nop
    nop
    nop
    bra Start
    nop
    
_Delay_22us:
    movlw 0x3A
    movwf R13, 0
L_Delay_22us2:
    decfsz R13, 1, 0
    bra L_Delay_22us2
    nop
    return 0
    
_ADC_Read:
    clrf ADCON0
    movlw 0x07
    IORWF ADCON2, 0x01 ; or 
    BSF ADCON2, 0x07   ;?????????? ??? 
    movff FARG_ADC_Read_channel, R0 ; ??????????? ? R0
    rlcf R0, 0x01 ;????? ????? ????? ??????? 
    bcf  R0, 0x00 ;????? ????
    rlcf R0, 0x01 ;????? ????? ????? ???????
    bcf  R0, 0x00 ;????? ????
    movf R0, 0x00 ;???????? 0 
    iorwf ADCON0, 0x01
    bsf ADCON0, 0x00
    RCALL _Delay_22us
    bsf ADCON0, 0x01
L_ADC_Read2:
    btfss ADCON0, 0x01
    bra L_ADC_Read3
    bra L_ADC_Read2
L_ADC_Read3:    
    MOVFF       ADRESH, R1  ;???????? ??????? ???? ?????????????? ??? ? R1
    CLRF        R0    ;???????? R0
    MOVF        ADRESL, 0 ; ADRESL ???????????? ? WREG
    IORWF       R0, 1; Or c Wreg ????????? ??????????? R0
    MOVLW       0x00
    IORWF       R1, 1 
    BCF         ADCON0, 0x00
L_end_ADC_Read:
    return      0
    
Main:

MOVLW       0x02 ;????????? ? WREG
MOVLB       0x0F ;????? ????? ??????
MOVWF       ANSELA, 1 ;???????? ? ANSELA 0F  RA1 - ??????

CLRF        ANSELC, 1 ;???? ? ???????? 
CLRF        ANSELD, 1 ;???? D ????????
MOVLW       0x02
MOVWF       TRISA ;RA1 ???? 
CLRF        TRISC ;???? ? ????? 
CLRF        TRISD ;???? D ?????
L_main0:
MOVLW       0x01 
MOVWF       FARG_ADC_Read_channel ;???????? ????? ?????? =1  
RCALL       _ADC_Read 
MOVFF       R0, _adc_rd
MOVFF       R1, _adc_rd+0x01
MOVFF       R0, LATC
MOVFF       _adc_rd+0x01, LATD
BRA         L_main0
L_end_main:
BRA         $
end
    
 
